{% extends "navigate/base.html" %}

{% block content %}
{% csrf_token %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<h1 id="test">test</h1>

<!-- Search form -->
<div class="centered">
	<div class="row">
		<div class="centered homepage-search">
			<form action="">

				<div class="input-group mb-4 p-1">
					<input type="search" placeholder="Find" aria-describedby="button-addon2"
						class="form-control bg-none border-0">

					<input type="search" placeholder="Near" aria-describedby="button-addon2"
						class="form-control bg-none border-0 ml-1">

					<div class="input-group-append border-0 searchbar-color">
						<button id="button-addon2" type="button" class="btn btn-link ml-1"><i
								class="fa fa-search"></i></button>
					</div>
				</div>

			</form>
		</div>
	</div>

	<!-- <div class="row">
			<div class="centered">
				<p>dummy options</p>
			</div>
		</div> -->

</div>

<script>
	if ($)
		console.log('jQuery is loaded')
	if ($.ajax)
		console.log('ajax is loaded')

	const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

	const request = new Request(
		"{% url 'navigate-test' %}",
		{ headers: { 'X-CSRFToken': csrftoken },
		text: 'potato' }
	);

	fetch(request, {
		method: 'POST',
		mode: 'same-origin'
	}).then(response => response.json())
	.then(function (data) {
		console.log(data)
		$("#test").click(() => {
			document.getElementById("test").innerHTML = data.success;
		})

		console.log("success")
	});

	// $.ajax({
	// 	type: "PUT",
	// 	url: "{% url 'navigate-test' %}",
	// 	data: {},
	// 	dataType: "json",
	// 	success: function (response) {
	// 		$("#test").click(() => {
	// 			document.getElementById("test").innerHTML = response.success;
	// 		})

	// 		console.log("success")
	// 	},
	// 	error: function () {
	// 		console.log("failed")
	// 	}
	// });

	// $("#test").click(() => {
	// 	$.ajax({
	// 		type: "GET",
	// 		url: "{% url 'navigate-test' %}",
	// 		data: {},
	// 		dataType: "json",
	// 		success: function () {
	// 			document.getElementById("test").innerHTML = "success"
	// 			console.log("success")
	// 		},
	// 		error: function () {
	// 			console.log("failed")
	// 		}
	// 	})
	// });
</script>

{% endblock content %}